# Resume å¹´é½¡éš±ç§è¨­å®šæ›´æ–°

## ğŸ“ éœ€æ±‚

åœ¨ç™¼å¸ƒå…¬é–‹å±¥æ­·æ™‚,ä¿ç•™ã€Œå¹´é½¡ã€è³‡è¨Š,ä½†éš±è—ã€Œå‡ºç”Ÿæ—¥æœŸã€ã€‚

## ğŸ¤” è¨­è¨ˆè€ƒé‡

### ç‚ºä»€éº¼ä¿ç•™å¹´é½¡?

1. **è·æ¶¯åˆ¤æ–·**: å¹´é½¡æ˜¯è©•ä¼°è·æ¶¯ç™¼å±•çš„é‡è¦åƒè€ƒ
2. **å·¥ä½œç¶“é©—è©•ä¼°**: çµåˆå¹´é½¡å’Œå·¥ä½œå¹´è³‡å¯ä»¥äº†è§£æ±‚è·è€…çš„ç¶“é©—æ·±åº¦
3. **å¸‚å ´å¸¸è¦‹åšæ³•**: æ—¥æœ¬æ±‚è·å¸‚å ´é€šå¸¸æœƒè¦æ±‚æä¾›å¹´é½¡
4. **ç›¸å°éš±ç§**: å¹´é½¡æ¯”ç²¾ç¢ºçš„å‡ºç”Ÿæ—¥æœŸè¼ƒä¸æ•æ„Ÿ

### ç‚ºä»€éº¼éš±è—å‡ºç”Ÿæ—¥æœŸ?

1. **ç²¾ç¢ºæ€§**: å®Œæ•´çš„å‡ºç”Ÿæ—¥æœŸéæ–¼ç²¾ç¢º,å®¹æ˜“è¢«ç”¨æ–¼èº«ä»½è­˜åˆ¥
2. **éš±ç§ä¿è­·**: é¿å…èˆ‡å…¶ä»–è³‡æ–™çµåˆå¾Œè¢«è¿½è¹¤
3. **å¿…è¦æ€§**: å…¬é–‹å±¥æ­·ä¸éœ€è¦ç²¾ç¢ºåˆ°ã€Œæ—¥ã€çš„è³‡è¨Š

---

## âœ… å¯¦ä½œå…§å®¹

### ä¿®æ”¹æª”æ¡ˆ
`/app/api/resumes/[id]/publish/route.ts`

### ä¿®æ”¹å‰
```typescript
function sanitizePrivateData(resume: any) {
  return {
    ...resume,
    // âŒ ç§»é™¤æ•æ„Ÿè³‡è¨Š
    phone: null,
    email: null,
    postal_code: null,
    city: null,
    address_line: null,
    building: null,
    birth_date: null,
    name_kana: null,
    age: null,  // âŒ åŸæœ¬ä¹Ÿç§»é™¤å¹´é½¡
  };
}
```

### ä¿®æ”¹å¾Œ
```typescript
function sanitizePrivateData(resume: any) {
  return {
    ...resume,
    // âŒ ç§»é™¤æ•æ„Ÿè³‡è¨Š
    phone: null,
    email: null,
    postal_code: null,
    city: null,
    address_line: null,
    building: null,
    birth_date: null,  // ç§»é™¤å‡ºç”Ÿæ—¥æœŸ (éš±ç§)
    name_kana: null,
    // âœ… ä¿ç•™å¹´é½¡ (age ä¿ç•™,ç”¨æ–¼è·æ¶¯åˆ¤æ–·)
  };
}
```

---

## ğŸ“Š éš±ç§è³‡è¨Šå°æ¯”

### ç§äººå±¥æ­· (resumes)
```json
{
  "birth_date": "1990-05-15",  // å®Œæ•´å‡ºç”Ÿæ—¥æœŸ
  "age": 34,                    // å¹´é½¡
  "phone": "090-1234-5678",    // é›»è©±
  "email": "user@example.com", // Email
  "postal_code": "123-4567",   // éƒµéå€è™Ÿ
  "city": "æ±äº¬éƒ½æ–°å®¿åŒº",       // è©³ç´°åœ°å€
  "address_line": "è¥¿æ–°å®¿1-2-3"
}
```

### å…¬é–‹å±¥æ­· (published_resumes)
```json
{
  "birth_date": null,          // âŒ ç§»é™¤
  "age": 34,                   // âœ… ä¿ç•™
  "phone": null,               // âŒ ç§»é™¤
  "email": null,               // âŒ ç§»é™¤
  "postal_code": null,         // âŒ ç§»é™¤
  "city": null,                // âŒ ç§»é™¤
  "address_line": null,        // âŒ ç§»é™¤
  "prefecture": "æ±äº¬éƒ½"        // âœ… ä¿ç•™ (åªé¡¯ç¤ºéƒ½é“åºœç¸£)
}
```

---

## ğŸ¯ ä½¿ç”¨æƒ…å¢ƒç¯„ä¾‹

### æƒ…å¢ƒ 1: HR æŸ¥çœ‹å…¬é–‹å±¥æ­·

```
HR çœ‹åˆ°:
- å§“å: ç”°ä¸­å¤ªéƒ
- å¹´é½¡: 34æ­²
- åœ°å€: æ±äº¬éƒ½
- å·¥ä½œç¶“é©—: 10å¹´

HR çš„åˆ¤æ–·:
âœ… å¯ä»¥è©•ä¼°ã€Œ34æ­²,10å¹´ç¶“é©—ã€æ˜¯å¦ç¬¦åˆè·ä½è¦æ±‚
âœ… å¯ä»¥åˆ¤æ–·è·æ¶¯ç™¼å±•é€Ÿåº¦
âŒ ä¸æœƒçŸ¥é“ç²¾ç¢ºçš„å‡ºç”Ÿæ—¥æœŸ
âŒ ä¸æœƒçŸ¥é“è©³ç´°çš„ä½å€å’Œè¯çµ¡æ–¹å¼
```

### æƒ…å¢ƒ 2: è·æ¶¯é¡§å•åˆ†æ

```
é¡§å•çœ‹åˆ°:
- å¹´é½¡: 34æ­²
- ç¬¬ä¸€ä»½å·¥ä½œ: 24æ­²é–‹å§‹ (2014å¹´)
- è½‰è·æ¬¡æ•¸: 4æ¬¡
- ç›®å‰è–ªè³‡å€é–“: å¯è¦‹

é¡§å•çš„åˆ†æ:
âœ… å¯ä»¥çµ¦å‡ºè·æ¶¯è¦åŠƒå»ºè­°
âœ… å¯ä»¥è©•ä¼°è–ªè³‡æˆé•·æ›²ç·š
âœ… å¯ä»¥åˆ¤æ–·è½‰è·é »ç‡æ˜¯å¦åˆç†
```

---

## ğŸ”’ éš±ç§ç­‰ç´šåˆ†é¡

### é«˜æ•æ„Ÿ (ä¸€å®šéš±è—)
- âŒ `phone` - é›»è©±è™Ÿç¢¼
- âŒ `email` - Email
- âŒ `postal_code` - éƒµéå€è™Ÿ
- âŒ `city` - åŸå¸‚
- âŒ `address_line` - è©³ç´°åœ°å€
- âŒ `building` - å»ºç¯‰åç¨±
- âŒ `birth_date` - å®Œæ•´å‡ºç”Ÿæ—¥æœŸ
- âŒ `name_kana` - å‡åå§“å

### ä¸­ç­‰æ•æ„Ÿ (é¸æ“‡æ€§ä¿ç•™)
- âœ… `age` - å¹´é½¡ (ä¿ç•™)
- âœ… `prefecture` - éƒ½é“åºœç¸£ (ä¿ç•™)
- âœ… `photo_url` - ç…§ç‰‡ (ä¿ç•™)
- âœ… `name_kanji` - æ¼¢å­—å§“å (ä¿ç•™)

### ä½æ•æ„Ÿ (ä¸€å®šä¿ç•™)
- âœ… `name_romaji` - ç¾…é¦¬å­—å§“å
- âœ… ç¤¾ç¾¤é€£çµ (LinkedIn, GitHub, Portfolio)
- âœ… å·¥ä½œç¶“æ­·ã€å­¸æ­·ã€æŠ€èƒ½ç­‰å°ˆæ¥­è³‡è¨Š

---

## ğŸŒ åœ‹éš›æ¯”è¼ƒ

### æ—¥æœ¬æ±‚è·å¸‚å ´
- âœ… é€šå¸¸æœƒè¦æ±‚æä¾›å¹´é½¡
- âœ… å±¥æ­·æ›¸æ ¼å¼é€šå¸¸åŒ…å«å¹´é½¡æ¬„ä½
- âš ï¸ å‡ºç”Ÿæ—¥æœŸè¼ƒå°‘å…¬é–‹åœ¨ç¶²è·¯ä¸Š

### æ­ç¾æ±‚è·å¸‚å ´
- âŒ ç¦æ­¢è©¢å•å¹´é½¡ (å¹´é½¡æ­§è¦–æ³•)
- âŒ å±¥æ­·ä¸Šä¸æ‡‰åŒ…å«å¹´é½¡å’Œå‡ºç”Ÿæ—¥æœŸ
- âš ï¸ æˆ‘å€‘çš„ç”¢å“å°ˆæ³¨æ—¥æœ¬å¸‚å ´,æ‰€ä»¥ä¿ç•™å¹´é½¡

---

## ğŸ“ æ›´æ–°çš„æ–‡ä»¶

1. `/app/api/resumes/[id]/publish/route.ts` - API å¯¦ä½œ
2. `.cursor/resume-api-endpoints.md` - API ç«¯é»æ–‡ä»¶
3. `.cursor/resume-api-design.md` - API è¨­è¨ˆæ–‡ä»¶
4. `.cursor/resume-age-privacy-update.md` - æœ¬æ–‡ä»¶

---

## ğŸ§ª æ¸¬è©¦æª¢æŸ¥æ¸…å–®

- [ ] ç™¼å¸ƒå±¥æ­·æ™‚,`age` æ¬„ä½æœ‰æ­£ç¢ºä¿ç•™
- [ ] ç™¼å¸ƒå±¥æ­·æ™‚,`birth_date` æ¬„ä½è¢«è¨­ç‚º null
- [ ] å…¬é–‹å±¥æ­·é é¢é¡¯ç¤ºå¹´é½¡
- [ ] å…¬é–‹å±¥æ­·é é¢ä¸é¡¯ç¤ºå‡ºç”Ÿæ—¥æœŸ
- [ ] å…¶ä»–æ•æ„Ÿè³‡è¨Šä¹Ÿæ­£ç¢ºè¢«ç§»é™¤

---

## ğŸ’¡ æœªä¾†å¯èƒ½çš„æ”¹é€²

### æ–¹æ¡ˆ A: ä½¿ç”¨è€…å¯é¸æ“‡
å…è¨±ä½¿ç”¨è€…åœ¨ç™¼å¸ƒæ™‚é¸æ“‡æ˜¯å¦å…¬é–‹å¹´é½¡:

```typescript
interface PublishOptions {
  is_public: boolean;
  public_url_slug?: string;
  privacy_settings?: {
    show_age: boolean;  // æ–°å¢: æ˜¯å¦é¡¯ç¤ºå¹´é½¡
    show_photo: boolean;
    show_location: boolean;
  }
}
```

### æ–¹æ¡ˆ B: å¹´é½¡ç¯„åœ
é¡¯ç¤ºå¹´é½¡ç¯„åœè€Œä¸æ˜¯ç²¾ç¢ºå¹´é½¡:

```typescript
// ä¸é¡¯ç¤º: "34æ­²"
// é¡¯ç¤º: "30-35æ­²" æˆ– "30ä»£"
function getAgeRange(age: number): string {
  const rangeStart = Math.floor(age / 5) * 5;
  return `${rangeStart}-${rangeStart + 4}æ­²`;
}
```

### æ–¹æ¡ˆ C: å‹•æ…‹è¨ˆç®—
ä¸å„²å­˜å¹´é½¡,è€Œæ˜¯åœ¨é¡¯ç¤ºæ™‚å‹•æ…‹è¨ˆç®—:

```typescript
// å„ªé»: å¹´é½¡æ°¸é æ˜¯æœ€æ–°çš„
// ç¼ºé»: éœ€è¦ä¿ç•™å‡ºç”Ÿå¹´ä»½ (ä½†ä¸éœ€è¦å®Œæ•´æ—¥æœŸ)
{
  birth_year: 1990,  // åªä¿ç•™å¹´ä»½
  age: null          // å‰ç«¯å‹•æ…‹è¨ˆç®—
}
```

---

## ğŸ¯ çµè«–

ç›®å‰çš„è¨­è¨ˆå¹³è¡¡äº†ä»¥ä¸‹å› ç´ :
1. âœ… æ—¥æœ¬æ±‚è·å¸‚å ´çš„ç¿’æ…£
2. âœ… è·æ¶¯è©•ä¼°çš„éœ€æ±‚
3. âœ… å€‹äººéš±ç§çš„ä¿è­·
4. âœ… å¯¦ä½œçš„ç°¡æ½”æ€§

ä¿ç•™å¹´é½¡ä½†éš±è—å‡ºç”Ÿæ—¥æœŸæ˜¯ä¸€å€‹åˆç†çš„æŠ˜è¡·æ–¹æ¡ˆã€‚

